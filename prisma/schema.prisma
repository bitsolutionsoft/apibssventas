generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
}

model abono_credito {
  idabono   Int       @id @default(autoincrement())
  idcredito Int?
  abono     Decimal?  @db.Decimal(12, 2)
  fecha     DateTime? @db.Date
  tipopago  String?   @db.VarChar(30)
  numcaja   String?   @db.VarChar(10)
  credito   credito?  @relation(fields: [idcredito], references: [idcredito], onDelete: Cascade, onUpdate: NoAction, map: "fk_abonocredito")

  @@index([idcredito], map: "fk_abonocredito")
}

model abono_proveedor {
  idabono          Int               @id @default(autoincrement())
  idcuenta         Int?
  abono            Decimal?          @db.Decimal(12, 2)
  fecha            DateTime?         @db.Date
  tipopago         String?           @db.VarChar(60)
  cuenta_proveedor cuenta_proveedor? @relation(fields: [idcuenta], references: [idcuenta], onDelete: NoAction, onUpdate: NoAction, map: "fk_abono")

  @@index([idcuenta], map: "fk_abono")
}

model ajuste {
  id          Int     @id
  nombre      String? @db.VarChar(100)
  descripcion String? @db.VarChar(100)
}

model cliente {
  idcliente Int       @id @default(autoincrement())
  nombre    String?   @db.VarChar(45)
  apellido  String?   @db.VarChar(45)
  telefono  Int?
  direccion String?   @db.VarChar(60)
  sexo      String?   @db.VarChar(15)
  nit       String?   @db.VarChar(16)
  estado    String?   @db.VarChar(10)
  factura   factura[]
}

model colocacion {
  idColocacion Int     @id @default(autoincrement())
  nombre       String? @db.VarChar(45)
  estado       String? @db.VarChar(12)
}

model credito {
  idcredito     Int             @id @default(autoincrement())
  idfactura     Int?
  abono         Decimal?        @db.Decimal(12, 2)
  estado        String?         @db.VarChar(20)
  abono_credito abono_credito[]
}

model cuenta_proveedor {
  idcuenta        Int               @id @default(autoincrement())
  idproveedor     Int?
  fecha           DateTime?         @db.DateTime(0)
  total           Decimal?          @db.Decimal(12, 2)
  total_abono     Decimal?          @db.Decimal(12, 2)
  saldo           Decimal?          @db.Decimal(12, 2)
  estado          String?           @db.VarChar(10)
  abono_proveedor abono_proveedor[]
  proveedor       proveedor?        @relation(fields: [idproveedor], references: [idProveedor], onDelete: NoAction, onUpdate: NoAction, map: "fk_cprov")

  @@index([idproveedor], map: "fk_cprov")
}

model detalle_factura {
  iddetalle   Int       @id @default(autoincrement())
  id_factura  Int?
  id_producto Int?
  cantidad    Int?
  precio      Decimal?  @db.Decimal(8, 2)
  subtotal    Decimal?  @db.Decimal(8, 2)
  idlote      Decimal?  @db.Decimal(16, 0)
  factura     factura?  @relation(fields: [id_factura], references: [idfactura], onDelete: NoAction, onUpdate: NoAction, map: "fk_factura")
  producto    producto? @relation(fields: [id_producto], references: [idproducto], onDelete: NoAction, onUpdate: NoAction, map: "fk_producto")

  @@index([id_factura], map: "fk_factura_idx")
  @@index([id_producto], map: "fk_producto_idx")
}

model empleado {
  idempleado Int       @id @default(autoincrement())
  nombre     String?   @db.VarChar(100)
  apellido   String?   @db.VarChar(100)
  direccion  String?   @db.VarChar(100)
  dpi        String?   @db.VarChar(13)
  telefono   Int?
  estado     String?   @db.VarChar(12)
  roles      String?   @db.VarChar(50)
  permiso    permiso[]
  usuario    usuario[]
}

model factura {
  idfactura        Int               @id @default(autoincrement())
  idcliente        Int?
  fecha            DateTime?         @db.DateTime(0)
  estado           String?           @db.VarChar(20)
  motivo_anulacion String?           @db.VarChar(45)
  total            Decimal?          @db.Decimal(12, 2)
  idempleado       Int?
  idvendedor       Int?
  detalle_factura  detalle_factura[]
  cliente          cliente?          @relation(fields: [idcliente], references: [idcliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_clilente")

  @@index([idcliente], map: "fk_clilente_idx")
}

model lote {
  idlote           Int       @id @default(autoincrement())
  idproducto       Int?
  cantidad         Int?
  precio_compra    Decimal?  @db.Decimal(8, 2)
  precio_mayorista Decimal?  @db.Decimal(8, 2)
  precio_unidad    Decimal?  @db.Decimal(8, 2)
  estado           String?   @db.VarChar(16)
  vence            DateTime? @db.Date
  producto         producto? @relation(fields: [idproducto], references: [idproducto], onDelete: NoAction, onUpdate: NoAction, map: "fk_loteproducto")

  @@index([idproducto], map: "fk_loteproducto_idx")
}

model modulo {
  idmodulo Int       @id @default(autoincrement())
  nombre   String?   @db.VarChar(20)
  permiso  permiso[]
}

model permiso {
  idpermiso  Int       @id @default(autoincrement())
  idempleado Int?
  idmodulo   Int?
  permiso    Int?
  modulo     modulo?   @relation(fields: [idmodulo], references: [idmodulo], onDelete: NoAction, onUpdate: NoAction, map: "fk_modulo")
  empleado   empleado? @relation(fields: [idempleado], references: [idempleado], onDelete: NoAction, onUpdate: NoAction, map: "fk_permiso")

  @@index([idmodulo], map: "fk_modulo")
  @@index([idempleado], map: "fk_permiso")
}

model producto {
  idproducto      Int               @id @default(autoincrement())
  codbarr         String?           @db.VarChar(25)
  idproveedor     Int?
  nombre          String?           @db.VarChar(60)
  presentacion    String?           @db.VarChar(45)
  especificacion  String?           @db.VarChar(60)
  stock           Int?
  cantidad_maxima Int?
  cantidad_minima Int?
  estado          String?           @db.VarChar(16)
  detalle_factura detalle_factura[]
  lote            lote[]
  proveedor       proveedor?        @relation(fields: [idproveedor], references: [idProveedor], onDelete: NoAction, onUpdate: NoAction, map: "fk_prove")

  @@index([idproveedor], map: "fk_prove")
}

model proveedor {
  idProveedor      Int                @id @default(autoincrement())
  nombre           String?            @db.VarChar(45)
  apellido         String?            @db.VarChar(45)
  telefono         Int?
  empresa          String?            @db.VarChar(45)
  direccion        String?            @db.VarChar(60)
  estado           String?            @db.VarChar(16)
  cuenta_proveedor cuenta_proveedor[]
  producto         producto[]
}

model usuario {
  idusuario  Int       @id @default(autoincrement())
  idempleado Int?
  usuario    String?   @db.VarChar(100)
  pass       String?   @db.VarChar(115)
  empleado   empleado? @relation(fields: [idempleado], references: [idempleado], onDelete: NoAction, onUpdate: NoAction, map: "fk_usuario")

  @@index([idempleado], map: "fk_usuario")
}
